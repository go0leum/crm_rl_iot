# SimpleConstructionEnv 클래스 문서

## 상태 (State)

- **[5, 5]**: 에이전트의 X, Y 좌표
- **[2, 2]**: 에이전트가 보유한 리소스 [0, 1] => 리소스 1 보유 안함, 리소스 2 보유함
- **[2]**: 사용가능한 리소스 [0] => 리소스 1 사용 가능, [1] => 리소스 2 사용 가능
- **(4, [3, 3])**: 프로젝트 태스크 별 리소스 상태 (0: 없음, 1: 준비됨, 2: 태스크 완료)

## 맵 정보

| 0         | 1   | 2         | 3       | 4         |
| --------- | --- | --------- | ------- | --------- |
| 시작 위치 | x   | 프로젝트2 | x       | x         |
| x         | x   | x         | 리소스1 | x         |
| x         | x   | x         | x       | x         |
| 리소스2   | x   | x         | x       | x         |
| x         | x   | x         | x       | 프로젝트1 |

## step 함수

1. **총 액션 카운트 제한 체크**:

   - `self.total_action_count`가 `self.max_total_actions`에 도달하면, 에이전트는 종료 상태로 전환되고 페널티 보상(-300)을 받습니다. (이는 원활한 학습을 위해서 필요합니다)

2. **액션 처리**:

   - **이동 (action < 4)**: 에이전트가 이동할 경우, `self._move(action)` 메서드를 호출하여 새로운 위치로 이동합니다.
   - **리소스 픽업 (action == 4)**: `self._pickup_resource()` 메서드를 호출하여 에이전트가 리소스를 픽업합니다.
   - **리소스 드롭 (action == 5)**: `self._dropoff_resource()` 메서드를 호출하여 에이전트가 리소스를 드롭합니다.
   - **태스크 실행 (action == 6)**: `self._execute_task()` 메서드를 호출하여 에이전트가 태스크를 실행합니다.

3. **일일 행동 제한 초과 체크**:

   - `self.action_count`가 `self.max_actions`에 도달하면, 행동 카운트를 초기화하고 다음 날로 전환합니다. 이때 리소스 사용 가능 상태가 전환되고, 날짜 타입이 업데이트됩니다.
   - `self.action_count`는 move에 1, 픽업과 드롭에 5, 태스크 실행에 10이 소비됩니다.
   - `self.action_count`가 행동 카운드가 5가 남았을때, 태스크 실행 액션을 통해 10이 소비되면 다음날로 전환되었을때, 행동카운트가 15가 남는것이 아닌 20이 남게 됩니다. (말 그대로 초기화 됩니다)

4. **모든 프로젝트 완료 체크**:
   - `_all_projects_complete()` 메서드를 호출하여 모든 프로젝트가 완료되었는지 확인하고, 완료되었다면 종료 상태로 전환됩니다.
5. **결과 반환**:
   - 새로운 상태, 보상, 종료 여부, 정보 딕셔너리를 반환합니다.

## \_move 함수

- **기능**: 에이전트의 위치를 이동시키는 함수입니다.
- **입력**:
  - `action`: 이동 방향을 나타내는 정수 (0: 위, 1: 오른쪽, 2: 아래, 3: 왼쪽)
- **출력**:
  - 이동 성공 시 -1, 이동 실패 시 -5를 반환합니다.
- **설명**:
  - 주어진 `action`에 따라 에이전트의 새로운 위치를 계산합니다.
  - 새로운 위치가 5x5 그리드의 경계 내에 있는지 확인합니다.
  - 경계 내에 있다면 에이전트의 위치를 업데이트하고 상태 배열에 새로운 위치를 반영합니다.
  - 경계 밖으로 이동하려고 할 경우, 에이전트의 위치는 변경되지 않으며 -5의 보상을 반환합니다.

## \_pickup_resource 함수

- **기능**: 에이전트가 리소스를 픽업하는 함수입니다.
- **출력**:
  - 리소스 픽업 성공 시 10, 실패 시 -5를 반환합니다.
- **설명**:
  - 에이전트의 현재 위치가 리소스1 또는 리소스2의 위치와 일치하는지 확인합니다.
  - 해당 리소스를 보유하고 있지 않으며 사용 가능한 경우(날짜에 따른 리소스 사용 가능 여부 확인), 리소스를 픽업하고 보상을 반환합니다.
  - 0일 부터 시작하는 짝수날과 홀수날이 존재하며, 짝수날에는 리소스1만, 홀수날에는 2만 pickup이 valid합니다.
  - 리소스를 픽업할 수 없는 경우 -5의 보상을 반환합니다.

## \_dropoff_resource 함수

- **기능**: 에이전트가 리소스를 드롭하는 함수입니다.
- **출력**:
  - 리소스 드롭 성공 시 보상, 실패 시 -5를 반환합니다.
- **설명**:
  - 에이전트가 리소스를 보유하고 있는지 확인합니다.
  - 현재 위치가 프로젝트 위치인지 확인하고, 해당 프로젝트에 리소스를 드롭합니다.
  - 리소스 드롭이 성공적으로 이루어지면 보상을 반환하고, 실패 시 -5의 보상을 반환합니다.
  - 리소스를 드롭할 때, 리소스 1을 가지고 있고, 프로젝트의 태스크 1과 2에서 모두 리소스 1을 요구한다면, 두 태스크 모두 리소스가 준비 완료 상태로 전이됩니다.

## \_execute_task 함수

- **기능**: 에이전트가 태스크를 실행하는 함수입니다.
- **출력**:
  - 태스크 실행 성공 시 100, 실패 시 -5를 반환합니다.
- **설명**:
  - 에이전트의 현재 위치가 프로젝트 위치인지 확인합니다.
  - 각 프로젝트의 태스크를 실행하고, 필요한 리소스가 준비되었는지 확인합니다.
  - 태스크가 성공적으로 실행되면 보상을 반환하고, 실패 시 -5의 보상을 반환합니다.
  - 태스크는 한번에 1개씩만 수행될 수 있습니다. 2개의 태스크가 모두 수행 가능하더라도 1개만 수행됩니다.

## \_all_projects_complete 함수

- **기능**: 모든 프로젝트의 태스크 완료 여부를 확인하는 함수입니다.
- **출력**:
  - 모든 프로젝트가 완료되면 True, 그렇지 않으면 False를 반환합니다.
- **설명**:
  - 각 프로젝트의 태스크 완료 상태를 확인하여 모든 태스크가 완료되었는지 판단합니다.
